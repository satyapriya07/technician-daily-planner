<div class="form-container">
    <h2>Add New Task</h2>

    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="customerName">Customer Name*</label>
            <input type="text" id="customerName" formControlName="customerName" class="form-control"
                [class.invalid]="taskForm.get('customerName')?.invalid && taskForm.get('customerName')?.touched" />
            <div class="error-text"
                *ngIf="taskForm.get('customerName')?.invalid && taskForm.get('customerName')?.touched">
                <span *ngIf="taskForm.get('customerName')?.errors?.['required']">Customer name is required.</span>
                <span *ngIf="taskForm.get('customerName')?.errors?.['pattern']">Name must only contain letters and
                    spaces.</span>
            </div>
        </div>

        <div class="form-group">
            <label for="location">Location/Address*</label>
            <input type="text" id="location" formControlName="location" class="form-control"
                [class.invalid]="taskForm.get('location')?.invalid && taskForm.get('location')?.touched" />
            <div class="error-text" *ngIf="taskForm.get('location')?.invalid && taskForm.get('location')?.touched">
                Location is required.
            </div>
        </div>

        <div class="form-group">
            <label for="taskType">Task Type*</label>
            <select id="taskType" formControlName="taskType" class="form-control">
                <option *ngFor="let type of taskTypes" [value]="type">{{ type }}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="scheduledTime">Scheduled Time*</label>
            <input type="datetime-local" id="scheduledTime" formControlName="scheduledTime" class="form-control"
                [class.invalid]="taskForm.get('scheduledTime')?.invalid && taskForm.get('scheduledTime')?.touched" />
            <div class="error-text"
                *ngIf="taskForm.get('scheduledTime')?.invalid && taskForm.get('scheduledTime')?.touched">
                <span *ngIf="taskForm.get('scheduledTime')?.errors?.['required']">Scheduled time is required.</span>
                <span *ngIf="taskForm.get('scheduledTime')?.errors?.['invalidYear']">Date must be in year 2026 or
                    later.</span>
            </div>
        </div>

        <div class="form-group">
            <label for="notes">Notes</label>
            <textarea id="notes" formControlName="notes" class="form-control" rows="3"></textarea>
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="taskForm.invalid || isSubmitting">
            {{ isSubmitting ? 'Saving...' : 'Add Task' }}
        </button>
    </form>
</div>